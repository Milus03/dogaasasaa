const mysql = require('mysql2');
const { config } = require('./config');

async function query(sql, params) {
    const connection = await mysql.createConnection(config.db);
    try {
        const [rows, fields] = await connection.promise().query(sql, params);  // Így adhatjuk vissza a megfelelő eredményeket
        return [rows, fields];
    } catch (err) {
        console.error('Hiba:', err);
        throw err;  // Az exceptiont dobni kell, hogy elérjük a catch blokkot
    } finally {
        await connection.end();
    }
}

module.exports = { query };
